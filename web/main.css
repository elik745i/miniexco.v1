/* --- main.css: For index.html only, no modal or tab styles --- */
*, *::before, *::after { box-sizing: border-box; }

:root {
  --controls-panel-width: clamp(400px, 32vw, 480px);
  --controls-panel-width-px: 400px;
  --controls-toggle-width: 54px;
  --controls-panel-collapsed-offset: calc(var(--controls-toggle-width) - var(--controls-panel-width));
  --controls-overlay-gap: 1.2rem;
  --controls-overlay-left-expanded: calc(var(--controls-panel-width) + var(--controls-overlay-gap));
  --controls-overlay-left-collapsed: calc(var(--controls-toggle-width) + var(--controls-overlay-gap));
  --controls-overlay-left-current: var(--controls-overlay-left-expanded);
  --controls-panel-bg: transparent;
  --controls-panel-border: transparent;
  --controls-panel-text: #f4f6ff;
  --joystick-size: 225px;
  --joystick-knob-size: 60px;
  --joystick-button-size: 72px;
  --joystick-button-color: rgba(32, 38, 52, 0.88);
  --joystick-button-color-hover: rgba(46, 54, 72, 0.95);
  --joystick-button-border: rgba(255, 255, 255, 0.28);
  --joystick-gap: 14px;
  --header-height: 4vh;
}
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;
  font-family: Arial, sans-serif;
  background: #000;
  color: #f4f6ff;
}

body {
  display: flex;
  flex-direction: column;
  height: 100%;
}

#mainContent {
  flex: 1 1 auto;
  position: relative;
  overflow: hidden;
}

body.dark { background: #050505; color: #f4f6ff; }
.header {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: var(--header-height);
  line-height: var(--header-height);
  background: black;
  color: white;
  text-align: center;
  padding: 0 1vh;
  font-size: 1vw;
}

.container {
  display: flex;
  flex-direction: row;
  height: 100%;
  width: 100%;
  overflow: hidden;
  position: relative;
  box-sizing: border-box;
}
.overlay-layout > .left {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  width: var(--controls-panel-width);
  min-width: 240px;
  max-width: 460px;
  padding: 2.5vh calc(1.9vw + var(--controls-toggle-width)) 2.5vh 1.9vw;
  transition: left 0.35s ease;
  will-change: left;
  overflow-y: visible;
  overflow-x: visible;
  max-height: 100%;
  background: transparent;
  color: var(--controls-panel-text);
  border-right: none;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  box-shadow: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  box-sizing: border-box;
  z-index: 60;
}
.overlay-layout > .left.dark {
  background: transparent;
  border-right: none;
}

.panel-toggle {
  position: absolute;
  top: 50%;
  right: 0;
  transform: translateY(-50%);
  width: var(--controls-toggle-width);
  min-height: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 18px 12px;
  background: rgba(12, 16, 24, 0.55);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-left: none;
  border-radius: 0 14px 14px 0;
  color: var(--controls-panel-text);
  cursor: pointer;
  transition: background 0.3s ease, opacity 0.3s ease;
  z-index: 65;
}

.panel-toggle:hover,
.panel-toggle:focus-visible {
  background: rgba(36, 40, 52, 0.68);
  opacity: 1;
  outline: none;
}

.panel-toggle__icon {
  position: relative;
  width: 0;
  height: 0;
}

.panel-toggle__icon::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  transform: translate(-50%, -50%);
  border-top: 12px solid transparent;
  border-bottom: 12px solid transparent;
  border-right: 16px solid currentColor;
  transition: transform 0.3s ease;
}

.panel-toggle[aria-expanded="false"] .panel-toggle__icon::before {
  transform: translate(-50%, -50%) rotate(180deg);
}

#controlsPanel.collapsed .panel-toggle {
  border-color: rgba(255, 255, 255, 0.3);
}

.right {
  flex: 1 1 auto;
  position: relative;
  background: black;
  overflow: hidden;
}
.right.dark { background: #222; color: white; }

#drawingCanvas,
#drawingOverlay {
  background: transparent;
  pointer-events: none;
}

#cameraStream {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  object-fit: fill;
  background-color: black;
  z-index: 1;
}

.overlay, .overlay-topright, .overlay-bottomright {
  position: absolute;
}
.overlay {
  top: 1vh; left: 1vh; z-index: 30;
}
.overlay-topright {
  top: 1vh; right: 1vh; text-align: right; z-index: 30;
}
.overlay-bottomright {
  right: 10px;
  background: transparent !important;
  color: white !important;
  font-size: 1.2vw;
  text-shadow: 0 0 3px black;
  z-index: 20;
  cursor: pointer;
  border-radius: 0 !important;
  padding: 0 !important;
  display: flex;
  align-items: center;
  gap: 8px;
}
.overlay-bottomright .overlay-icon {
  width: 26px;
  height: 26px;
  flex-shrink: 0;
}
.overlay-bottomright .overlay-label {
  font-size: clamp(13px, 1.1vw, 18px);
  letter-spacing: 0.02em;
}

#statusOverlay {
 z-index: 30; }
.arrows { font-size: 3vw; color: grey; }

.slidecontainer { width: 100%; }
.slider {
  -webkit-appearance: none;
  width: 100%;
  height: 2vh;
  border-radius: 0.5vh;
  background: #d3d3d3;
  outline: none;
  opacity: 0.7;
  transition: opacity .2s;
  cursor: grab;
}
.slider:hover { opacity: 1; }
.slider:active { cursor: grabbing; }
.slider::-webkit-slider-thumb,
.slider::-moz-range-thumb {
  width: 4vh;
  height: 4vh;
  border-radius: 50%;
  background: red;
  cursor: grab;
}
.slider.active { box-shadow: 0 0 10px rgba(255, 0, 0, 0.7); }

.ctrlBtn {
  width: 100%;
  padding: 10px 20px;
  font-size: 16px;
  border: none;
  border-radius: 5px;
  margin-top: 10px;
  transition: transform 0.1s, background-color 0.2s;
}
.ctrlBtn:active { transform: scale(0.95); }
.ctrlBtn.dark { background-color: #444; color: white; }
.ctrlBtn.light { background-color: #ddd; color: black; }
.ctrlBtn:hover { transform: scale(1.03); cursor: pointer; }

.beaconStyle { background-color: #d50000; color: white; border: none; }
.emergencyStyle { background-color: #ffe600; color: #1b1b1b; border: none; }

.beaconStyle.blinking {
  animation: beaconFlash 0.85s linear infinite;
  box-shadow: 0 0 18px rgba(213, 0, 0, 0.6);
}

@keyframes beaconFlash {
  0%, 100% {
    background-color: #d50000;
    box-shadow: 0 0 16px rgba(213, 0, 0, 0.65);
  }
  50% {
    background-color: #0d47a1;
    box-shadow: 0 0 18px rgba(13, 71, 161, 0.65);
  }
}

.emergencyStyle.blinking {
  animation: emergencyFlash 0.75s ease-in-out infinite;
  color: #1b1b1b;
  box-shadow: 0 0 20px rgba(255, 214, 0, 0.6);
}

@keyframes emergencyFlash {
  0%, 100% {
    background-color: #ffea00;
    box-shadow: 0 0 15px rgba(255, 234, 0, 0.55);
  }
  50% {
    background-color: #ffc400;
    box-shadow: 0 0 22px rgba(255, 196, 0, 0.75);
  }
}


#ledToggleBtn {
  width: 100%;
  padding: 10px 20px;
  background-color: #222;
  color: white;
  border: 2px solid white;
  border-radius: 5px;
  font-size: 16px;
}
#ledToggleBtn.active { background-color: yellow; color: black; border: none; }

#chargingOverlay {
  position: absolute;
  top: 1vh; right: 1vh;
  width: 4vw; height: 2vh;
  border: 2px solid lime;
  border-radius: 0.5vh;
  overflow: hidden;
  display: none;
  background: #222;
  z-index: 999;
}
#chargingFill {
  height: 100%;
  width: 0%;
  background-color: lime;
  animation: chargingAnim 1s linear infinite;
}
@keyframes chargingAnim { 0% { width: 0%; } 100% { width: 100%; } }
#chargeIcon {
  margin-left: 0.5vw;
  font-size: 1.5vw;
  font-weight: bold;
  vertical-align: middle;
  animation: fadeCharge 1.5s infinite;
  transition: color 0.3s ease;
}
@keyframes fadeCharge {
  0% { opacity: 0.2; }
  50% { opacity: 1.0; }
  100% { opacity: 0.2; }
}

.batt-green { color: #00ff00; }
.batt-orange { color: #ffaa00; }
.batt-red { color: #ff0000; }
.wifi-green { color: #00ff00; }
.wifi-orange { color: #ffaa00; }
.wifi-red { color: #ff0000; }
.batt-critical { animation: flashRed 1s infinite; }
@keyframes flashRed { 0% { color: red; } 50% { color: white; } 100% { color: red; } }

#imuOverlay { font-family: sans-serif; }

.turn-indicator {
  position: absolute;
  top: 50%;
  font-size: 8vw;
  color: yellow;
  opacity: 0;
  z-index: 15;
  transform: translateY(-50%);
  pointer-events: none;
  background: transparent !important;
  text-shadow: 1px 1px 3px black;
}
.turn-indicator.left { left: 2vw; }
.turn-indicator.right {
  right: 2vw;
  text-align: right;
}
.turn-indicator.blinking { animation: flashTurn 1s infinite; }
@keyframes flashTurn { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
#leftIndicator, #rightIndicator {
  opacity: 0; visibility: hidden; transition: opacity 0.3s ease;
}
#leftIndicator.visible, #rightIndicator.visible { visibility: visible; opacity: 1; }

#laneOverlay {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  pointer-events: none; z-index: 5;
}
.lane {
  position: absolute; bottom: 10px; height: 50%; width: 8px;
  background: rgba(255, 255, 0, 0.7); opacity: 0.7;
}
.left-lane { left: 5%; transform: rotate(55deg); transform-origin: bottom center; }
.right-lane { right: 5%; transform: rotate(-55deg); transform-origin: bottom center; }

.joystick-control-wrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 22px 0 8px;
}

.joystick-grid {
  display: grid;
  grid-template-columns: repeat(3, auto);
  grid-template-rows: repeat(3, auto);
  gap: var(--joystick-gap);
  align-items: center;
  justify-items: center;
}

.joystick-grid__spacer {
  width: var(--joystick-button-size);
  height: var(--joystick-button-size);
  pointer-events: none;
}

#joystickContainer {
  width: var(--joystick-size);
  height: var(--joystick-size);
  background: rgba(30, 36, 48, 0.7);
  border-radius: 18px;
  position: relative;
  user-select: none;
  touch-action: none;
  cursor: grab;
  box-shadow: 0 24px 40px rgba(0, 0, 0, 0.45);
  border: 1px solid rgba(255, 255, 255, 0.22);
}
#joystickKnob {
  position: absolute;
  width: var(--joystick-knob-size);
  height: var(--joystick-knob-size);
  background: radial-gradient(circle at 30% 30%, #fafafa, #bfc5d3);
  border-radius: 50%;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transition: left 0.2s ease, top 0.2s ease, transform 0.2s ease;
  user-select: none;
  touch-action: none;
  pointer-events: none;
  box-shadow: 0 18px 32px rgba(0, 0, 0, 0.45);
}
#joystickContainer:hover {
  background: rgba(42, 48, 60, 0.82);
}
#joystickContainer:hover #joystickKnob {
  background: radial-gradient(circle at 30% 30%, #ffffff, #d7dce8);
  box-shadow: 0 22px 36px rgba(0, 0, 0, 0.5);
  transform: translate(-50%, -50%) scale(1.05);
}

.joystick-dir {
  position: relative;
  width: var(--joystick-button-size);
  height: var(--joystick-button-size);
  padding: 0;
  background: transparent;
  border: none;
  cursor: pointer;
  touch-action: manipulation;
}
.joystick-dir::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transition: filter 0.2s ease, transform 0.15s ease;
}
.joystick-dir--up::before {
  border-left: calc(var(--joystick-button-size) / 2) solid transparent;
  border-right: calc(var(--joystick-button-size) / 2) solid transparent;
  border-bottom: calc(var(--joystick-button-size) * 0.92) solid var(--joystick-button-color);
}
.joystick-dir--down::before {
  border-left: calc(var(--joystick-button-size) / 2) solid transparent;
  border-right: calc(var(--joystick-button-size) / 2) solid transparent;
  border-top: calc(var(--joystick-button-size) * 0.92) solid var(--joystick-button-color);
}
.joystick-dir--left::before {
  border-top: calc(var(--joystick-button-size) / 2) solid transparent;
  border-bottom: calc(var(--joystick-button-size) / 2) solid transparent;
  border-right: calc(var(--joystick-button-size) * 0.92) solid var(--joystick-button-color);
}
.joystick-dir--right::before {
  border-top: calc(var(--joystick-button-size) / 2) solid transparent;
  border-bottom: calc(var(--joystick-button-size) / 2) solid transparent;
  border-left: calc(var(--joystick-button-size) * 0.92) solid var(--joystick-button-color);
}
.joystick-dir:hover::before,
.joystick-dir:focus-visible::before {
  filter: brightness(1.15);
  transform: translate(-50%, -50%) scale(1.03);
}
.joystick-dir:focus-visible {
  outline: 2px solid rgba(255, 255, 255, 0.55);
  outline-offset: 4px;
}
.joystick-dir__icon {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.joystick-dir:active::before {
  filter: brightness(1.25);
  transform: translate(-50%, -50%) scale(0.97);
}
@media (max-width: 800px), (max-height: 600px) {
  .arrows { font-size: 5vw; }
  .header {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: var(--header-height);
  line-height: var(--header-height);
  background: black;
  color: white;
  text-align: center;
  padding: 0 1vh;
  font-size: 1vw;
}
  .overlay, .overlay-topright { font-size: 2vw; }
}

label span { font-weight: normal; margin-left: 6px; color: yellow; }

.blur { filter: blur(5px); pointer-events: none; user-select: none; }

#startButton, #stopButton {
  z-index: 25;
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  border-radius: 6px;
  font-size: 1vw;
  cursor: pointer;
  text-shadow: 1px 1px 2px black;
  transition: transform 0.2s, box-shadow 0.3s;
  font-weight: bold;
  padding: 8px 14px;
}

#startButton { 
  background-color: lime; 
  color: black; 
  animation: 
  pulseStart 1.6s infinite; 
}

#stopButton { 
  background-color: red; 
  color: white; 
  animation: pulseStop 1.6s infinite; 
  bottom: auto !important; 
  transform: translate(-50%, -120%);
}

#startButton:hover { box-shadow: 0 0 10px lime; transform: scale(1.05); }
#stopButton:hover { box-shadow: 0 0 10px red; transform: scale(1.05); }
@keyframes pulseStart { 0%, 100% { box-shadow: 0 0 6px lime; } 50% { box-shadow: 0 0 16px lime; } }
@keyframes pulseStop { 0%, 100% { box-shadow: 0 0 6px red; } 50% { box-shadow: 0 0 16px red; } }
#startButton:active, #stopButton:active { transform: scale(0.95); filter: brightness(0.9); }

/* SNAPSHOT and CAPTURE OVERLAY BUTTONS */

/* --- Camera & Video SVG Icon Styles for overlay-bottomright --- */
.icon-camera, .icon-record {
  width: 24px;
  height: 24px;
  display: inline-block;
  margin-right: 8px;
  vertical-align: middle;
}

/* Camera (photo) icon styling */
.icon-camera .camera-body {
  fill: rgba(255,255,255,0.12);
  stroke: #fff;
  stroke-width: 2;
}
.icon-camera .camera-lens {
  fill: #fff;
  opacity: 0.93;
}
.icon-camera .camera-bar {
  fill: #fff;
  opacity: 0.96;
}

/* Video (record) icon styling */
.icon-record .record-outer {
  fill: #ff4040;
  stroke: #fff;
  stroke-width: 2;
}
.icon-record .record-inner {
  fill: #fff;
  opacity: 0.93;
}

/* Optional: On hover/active, highlight icons */
.overlay-bottomright:hover .icon-camera .camera-body,
.overlay-bottomright.active .icon-camera .camera-body {
  stroke: #ff3535;
}
.overlay-bottomright:hover .icon-record .record-outer,
.overlay-bottomright.active .icon-record .record-outer {
  fill: #ff3535;
  stroke: #ff3535;
}

@keyframes recordPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(255,32,32,0.88), 0 0 14px 4px rgba(255,60,60,0.7);
  }
  50% {
    box-shadow: 0 0 0 14px rgba(255,32,32,0.42), 0 0 28px 8px rgba(255,120,120,0.44);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(255,32,32,0), 0 0 14px 4px rgba(255,60,60,0.3);
  }
}

#videoCaptureBtn.recording {
  animation: recordPulse 1.1s infinite;
  background: #2b0000;
  color: white !important;
  border-color: #ff4444 !important;
  /* Optionally: Make button a little bolder for effect */
  filter: brightness(1.1);
}
#videoCaptureBtn.recording .icon-record .record-outer {
  fill: #ff3535 !important;
  stroke: #fff !important;
  /* Add glowing effect */
  filter: drop-shadow(0 0 6px #ff4444);
  transition: filter 0.2s;
}

@keyframes captureGlowHover {
  0%   { box-shadow: 0 2px 6px #0006, 0 0 0px #ff444477; }
  40%  { box-shadow: 0 2px 6px #0006, 0 0 14px 3px #ff4444bb; }
  100% { box-shadow: 0 2px 6px #0006, 0 0 0px #ff444477; }
}

#videoCaptureBtn:hover:not(.recording) {
  background: #ff444422;
  color: #ff4444;
  animation: captureGlowHover 1s linear infinite;
  border-color: #ff4444;
}

/*------------MÄ±c button--------------*/
#micBtn {
  background: #444;
  color: white;
  transition: background 0.2s, color 0.2s, box-shadow 0.2s, transform 0.1s;
  border-radius: 8px;
  padding: 7px 15px;
  box-shadow: 0 2px 6px #0006;
  display: flex;
  align-items: center;
  gap: 8px;
  /* Remove blinking caret/cursor */
  caret-color: transparent;
  /* Optional: Prevent accidental selection */
  user-select: none;
  /* Remove focus outline (custom below) */
  outline: none;
  border: none;
  cursor: pointer;
}

#micBtn.active, #micBtn.listening {
  background: #16d16e;
  color: white;
  box-shadow: 0 0 12px 3px #fff700, 0 0 24px 8px #fff70077, 0 2px 6px #0006;
  animation: micPulse 1s infinite;
}
#micBtn:active, #micBtn.pushed {
  transform: scale(0.93);
  filter: brightness(0.92);
}
#micBtn.active #micIcon,
#micBtn.listening #micIcon {
  color: #fff700 !important;
  text-shadow: 0 0 8px #fff700cc, 0 0 20px #fff70055;
}
#micBtn.active:hover, #micBtn.listening:hover {
  background: #16d16e;
  color: #fff700;
  box-shadow: 0 0 20px 8px #fff700, 0 2px 10px #16d16e44;
}
/* Pulse animation for "on" state */
@keyframes micPulse {
  0%   { box-shadow: 0 0 12px 3px #fff700, 0 0 24px 8px #fff70077, 0 2px 6px #0006; }
  50%  { box-shadow: 0 0 24px 8px #fff700aa, 0 0 36px 14px #fff70055, 0 2px 10px #16d16e44; }
  100% { box-shadow: 0 0 12px 3px #fff700, 0 0 24px 8px #fff70077, 0 2px 6px #0006; }
}

@keyframes micGlowHover {
  0%   { box-shadow: 0 2px 6px #0006, 0 0 0px #16d16e77; }
  40%  { box-shadow: 0 2px 6px #0006, 0 0 14px 3px #16d16e88; }
  100% { box-shadow: 0 2px 6px #0006, 0 0 0px #16d16e77; }
}

#micBtn:hover:not(.active):not(.listening) {
  background: #16d16e33;
  color: #fff700;
  animation: micGlowHover 0.9s linear infinite;
}

/* Transparent background for all overlay buttons by default */
.overlay-bottomright,
#photoCaptureBtn,
#videoCaptureBtn,
#drawPathBtn,
#wipePathBtn,
#mediaPlayerBtn {
  background: transparent !important;
  color: white;
  transition: background 0.2s, color 0.2s, box-shadow 0.2s, transform 0.1s;
  border-radius: 8px;
  padding: 7px 15px;
  box-shadow: 0 2px 6px #0006;
  display: flex;
  align-items: center;
  gap: 8px;
  caret-color: transparent;
  user-select: none;
  outline: none;
  border: none;
  cursor: pointer;
  font-size: 1em;
}

/* Tactile press for all overlay buttons */
.overlay-bottomright:active, 
.overlay-bottomright.pushed,
#photoCaptureBtn:active, #photoCaptureBtn.pushed,
#videoCaptureBtn:active, #videoCaptureBtn.pushed,
#drawPathBtn:active, #drawPathBtn.pushed,
#wipePathBtn:active, #wipePathBtn.pushed,
#mediaPlayerBtn:active, #mediaPlayerBtn.pushed {
  transform: scale(0.93);
  filter: brightness(0.92);
}

/* Animated hover effect for all overlay buttons (when not active/recording) */
@keyframes overlayGlowHover {
  0%   { box-shadow: 0 2px 6px #0006, 0 0 0px #16d16e77; }
  40%  { box-shadow: 0 2px 6px #0006, 0 0 14px 3px #16d16e88; }
  100% { box-shadow: 0 2px 6px #0006, 0 0 0px #16d16e77; }
}
.overlay-bottomright:hover:not(.active):not(.listening):not(.recording),
#photoCaptureBtn:hover,
#drawPathBtn:hover,
#wipePathBtn:hover,
#mediaPlayerBtn:hover {
  background: rgba(22,209,110,0.17);
  color: #fff700;
  animation: overlayGlowHover 0.9s linear infinite;
}

/* Special: Video capture hover = red glow when not recording */
@keyframes captureGlowHover {
  0%   { box-shadow: 0 2px 6px #0006, 0 0 0px #ff444477; }
  40%  { box-shadow: 0 2px 6px #0006, 0 0 14px 3px #ff4444bb; }
  100% { box-shadow: 0 2px 6px #0006, 0 0 0px #ff444477; }
}
#videoCaptureBtn:hover:not(.recording) {
  background: rgba(255,68,68,0.12);
  color: #ff4444;
  animation: captureGlowHover 1s linear infinite;
  border-color: #ff4444;
}

/* Active/recording/pulsing states (keep your existing) */
#videoCaptureBtn.recording {
  animation: recordPulse 1.1s infinite;
  background: #2b0000;
  color: white !important;
  border-color: #ff4444 !important;
  filter: brightness(1.1);
}
#videoCaptureBtn.recording .icon-record .record-outer {
  fill: #ff3535 !important;
  stroke: #fff !important;
  filter: drop-shadow(0 0 6px #ff4444);
  transition: filter 0.2s;
}

/* Mic active/listening style stays the same */
#micBtn.active, #micBtn.listening {
  background: #16d16e;
  color: white;
  box-shadow: 0 0 12px 3px #fff700, 0 0 24px 8px #fff70077, 0 2px 6px #0006;
  animation: micPulse 1s infinite;
}

/* Mic hover (when not active) uses transparent+glow like the rest */
#micBtn:hover:not(.active):not(.listening) {
  background: rgba(22,209,110,0.17);
  color: #fff700;
  animation: overlayGlowHover 0.9s linear infinite;
}

/* Focus style */
.overlay-bottomright:focus,
#photoCaptureBtn:focus,
#videoCaptureBtn:focus,
#drawPathBtn:focus,
#wipePathBtn:focus,
#mediaPlayerBtn:focus {
  outline: none;
  box-shadow: 0 0 0 3px #38ffa177, 0 2px 6px #0006;
}

.cameraStyle {
  background-color: #1976d2 !important; /* blue */
  color: white !important;
}
#cameraToggleBtn.active {
  background-color: #42a5f5 !important;
  color: #fff;
  border: none;
}

/* ---- Spinner animation for SD reindex overlay ---- */
@keyframes spin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

/* help some browsers rotate around the center of the SVG */
#sdReindexSpinner .sd-spinner svg {
  transform-origin: 50% 50%;
}

#toast {
  visibility: hidden;
  min-width: 250px;
  background: #333;
  color: #fff;
  text-align: center;
  border-radius: 2px;
  padding: 16px;
  position: fixed;
  z-index: 15000;   /* make sure it's above modals/blur */
  left: 50%;
  bottom: 30px;
  font-size: 17px;
  opacity: 0;
  transition: opacity 0.5s;
  transform: translateX(-50%); /* center horizontally */
}

.toast-success { background-color: #4CAF50; }
.toast-error   { background-color: #e53935; }
.toast-info    { background-color: #1976d2; }
.overlay-layout > .right {
  flex: 1 1 auto;
  position: relative;
  background: black;
  overflow: hidden;
}

.overlay-layout > .left::-webkit-scrollbar {
  width: 6px;
}
.overlay-layout > .left::-webkit-scrollbar-track {
  background: transparent;
}
.overlay-layout > .left::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.35);
  border-radius: 8px;
}

.overlay-layout > .left h3 {
  color: inherit;
  margin: 1.4vh 0 0.9vh;
  text-shadow: 0 2px 6px rgba(0, 0, 0, 0.6);
}

.overlay-layout > .left label {
  color: inherit;
  font-weight: 500;
  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.65);
}

.overlay-layout > .left hr {
  width: 100%;
  border: none;
  border-top: 1px solid rgba(255, 255, 255, 0.28);
  margin: 2.6vh 0 2vh;
}

.overlay-layout > .left .ctrlBtn {
  background: rgba(22, 26, 36, 0.65);
  color: var(--controls-panel-text);
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: 0 16px 30px rgba(0, 0, 0, 0.34);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}
.overlay-layout > .left .ctrlBtn:hover {
  background: rgba(32, 37, 48, 0.78);
}
.overlay-layout > .left .ctrlBtn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.45), 0 18px 34px rgba(0, 0, 0, 0.42);
}

.control-button-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
  width: 100%;
  margin-top: 20px;
}

.control-button-grid .ctrlBtn {
  width: 100%;
}

.control-button-grid__item--span2 {
  grid-column: span 2;
}

.control-button-grid__label {
  grid-column: span 2;
  margin: 0;
  font-size: 1.05rem;
  font-weight: 600;
  text-align: left;
  color: inherit;
}

.overlay-layout > .left .slidecontainer {
  width: 100%;
}

.overlay-layout > .left .slider {
  background: rgba(255, 255, 255, 0.28);
  border-radius: 999px;
  box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);
}
.overlay-layout > .left .slider::-webkit-slider-thumb,
.overlay-layout > .left .slider::-moz-range-thumb {
  background: #16d16e;
  border: 2px solid rgba(0, 0, 0, 0.45);
  box-shadow: 0 0 12px rgba(22, 209, 110, 0.55);
}

.overlay-layout > .left .vertical-slider {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.12));
  border-radius: 18px;
  border: 1px solid rgba(255, 255, 255, 0.22);
}
.overlay-layout > .left .vertical-slider::-webkit-slider-thumb,
.overlay-layout > .left .vertical-slider::-moz-range-thumb {
  background: #16d16e;
  border: 2px solid rgba(0, 0, 0, 0.4);
}

.overlay-layout .overlay {
  left: var(--controls-overlay-left-current);
  transition: left 0.35s ease;
}

.overlay-layout #camStatusOverlay,
.overlay-layout #imuOverlay {
  left: var(--controls-overlay-left-current) !important;
  transition: left 0.35s ease;
}

@supports not ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) {
  .overlay-layout > .left {
    background: transparent;
  }
  .overlay-layout > .left .ctrlBtn {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}
























































#drawingCanvas,
#drawingOverlay {
  background: transparent;
  pointer-events: none;
}


/* --- main.css: For index.html only, no modal or tab styles --- */
*, *::before, *::after { box-sizing: border-box; }

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;
  font-family: Arial;
  background: white;
  box-sizing: border-box;
}

body.dark { background: #111; color: white; }

.header {
  height: 4vh;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  background: black;
  color: white;
  text-align: center;
  padding: 1vh;
  font-size: 1vw;
}

.container {
  display: flex;
  flex-direction: row;
  height: calc(100vh - 4vh);
  width: 100vw;
  overflow: hidden;
}

.left {
  flex: 1;
  min-width: 200px;
  background: white;
  padding: 1vh;
  overflow-y: auto;
  max-height: 100%;
  box-sizing: border-box;
  -webkit-overflow-scrolling: touch;
}
.left.dark { background: #222; color: white; }

.right {
  flex: 4;
  display: flex;
  justify-content: center;
  align-items: center;
  background: black;
  position: relative;
  overflow: hidden;
}
.right.dark { background: #222; color: white; }

#cameraStream {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  background-color: black;
  z-index: 1;
}

.overlay, .overlay-topright, .overlay-bottomright {
  position: absolute;
}
.overlay {
  top: 1vh; left: 1vh; z-index: 30;
}
.overlay-topright {
  top: 1vh; right: 1vh; text-align: right; z-index: 30;
}
.overlay-bottomright {
  right: 10px;
  background: transparent !important;
  color: white !important;
  font-size: 1.2vw;
  text-shadow: 0 0 3px black;
  z-index: 20;
  cursor: pointer;
  border-radius: 0 !important;
  padding: 0 !important;
}

#statusOverlay { z-index: 30; }
.arrows { font-size: 3vw; color: grey; }

.slidecontainer { width: 100%; }
.slider {
  -webkit-appearance: none;
  width: 100%;
  height: 2vh;
  border-radius: 0.5vh;
  background: #d3d3d3;
  outline: none;
  opacity: 0.7;
  transition: opacity .2s;
  cursor: grab;
}
.slider:hover { opacity: 1; }
.slider:active { cursor: grabbing; }
.slider::-webkit-slider-thumb,
.slider::-moz-range-thumb {
  width: 4vh;
  height: 4vh;
  border-radius: 50%;
  background: red;
  cursor: grab;
}
.slider.active { box-shadow: 0 0 10px rgba(255, 0, 0, 0.7); }

.ctrlBtn {
  width: 100%;
  padding: 10px 20px;
  font-size: 16px;
  border: none;
  border-radius: 5px;
  margin-top: 10px;
  transition: transform 0.1s, background-color 0.2s;
}
.ctrlBtn:active { transform: scale(0.95); }
.ctrlBtn.dark { background-color: #444; color: white; }
.ctrlBtn.light { background-color: #ddd; color: black; }
.ctrlBtn:hover { transform: scale(1.03); cursor: pointer; }

.beaconStyle { background-color: red; color: white; }
.emergencyStyle { background-color: yellow; color: black; }

#ledToggleBtn {
  width: 100%;
  padding: 10px 20px;
  background-color: #222;
  color: white;
  border: 2px solid white;
  border-radius: 5px;
  font-size: 16px;
}
#ledToggleBtn.active { background-color: yellow; color: black; border: none; }

#chargingOverlay {
  position: absolute;
  top: 1vh; right: 1vh;
  width: 4vw; height: 2vh;
  border: 2px solid lime;
  border-radius: 0.5vh;
  overflow: hidden;
  display: none;
  background: #222;
  z-index: 999;
}
#chargingFill {
  height: 100%;
  width: 0%;
  background-color: lime;
  animation: chargingAnim 1s linear infinite;
}
@keyframes chargingAnim { 0% { width: 0%; } 100% { width: 100%; } }
#chargeIcon {
  margin-left: 0.5vw;
  font-size: 1.5vw;
  font-weight: bold;
  vertical-align: middle;
  animation: fadeCharge 1.5s infinite;
  transition: color 0.3s ease;
}
@keyframes fadeCharge {
  0% { opacity: 0.2; }
  50% { opacity: 1.0; }
  100% { opacity: 0.2; }
}

.batt-green { color: #00ff00; }
.batt-orange { color: #ffaa00; }
.batt-red { color: #ff0000; }
.wifi-green { color: #00ff00; }
.wifi-orange { color: #ffaa00; }
.wifi-red { color: #ff0000; }
.batt-critical { animation: flashRed 1s infinite; }
@keyframes flashRed { 0% { color: red; } 50% { color: white; } 100% { color: red; } }

#imuOverlay { font-family: sans-serif; }

.turn-indicator {
  position: absolute;
  top: 50%;
  font-size: 8vw;
  color: yellow;
  opacity: 0;
  z-index: 15;
  transform: translateY(-50%);
  pointer-events: none;
  background: transparent !important;
  text-shadow: 1px 1px 3px black;
}
.turn-indicator.left { left: 2vw; }
.turn-indicator.right { right: 2vw; }
.turn-indicator.blinking { animation: flashTurn 1s infinite; }
@keyframes flashTurn { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
#leftIndicator, #rightIndicator {
  opacity: 0; visibility: hidden; transition: opacity 0.3s ease;
}
#leftIndicator.visible, #rightIndicator.visible { visibility: visible; opacity: 1; }

#laneOverlay {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  pointer-events: none; z-index: 5;
}
.lane {
  position: absolute; bottom: 10px; height: 50%; width: 8px;
  background: rgba(255, 255, 0, 0.7); opacity: 0.7;
}
.left-lane { left: 5%; transform: rotate(55deg); transform-origin: bottom center; }
.right-lane { right: 5%; transform: rotate(-55deg); transform-origin: bottom center; }

#joystickContainer {
  width: 150px;
  height: 150px;
  background-color: #444;
  border-radius: 10px;
  position: relative;
  margin: 20px auto;
  user-select: none;
  touch-action: none;
  cursor: grab;
}
#joystickKnob {
  position: absolute;
  width: 40px;
  height: 40px;
  background: #888;
  border-radius: 50%;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transition: left 0.2s ease, top 0.2s ease;
  user-select: none;
  touch-action: none;
  pointer-events: none;
}
#joystickContainer:hover {
  background-color: #555;
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
}
#joystickContainer:hover #joystickKnob {
  background: #aaa;
  box-shadow: 0 0 6px rgba(255, 255, 255, 0.4);
  transform: translate(-50%, -50%) scale(1.1);
  transition: transform 0.15s, background 0.2s, box-shadow 0.2s;
}
.vertical-slider { writing-mode: vertical-lr; direction: rtl; width: 32px; height: 200px; }

@media (max-width: 800px), (max-height: 600px) {
  .arrows { font-size: 5vw; }
  .header { font-size: 2vw; }
  .overlay, .overlay-topright { font-size: 2vw; }
}

label span { font-weight: normal; margin-left: 6px; color: yellow; }

.blur { filter: blur(5px); pointer-events: none; user-select: none; }

#startButton, #stopButton {
  z-index: 25;
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  border-radius: 6px;
  font-size: 1vw;
  cursor: pointer;
  text-shadow: 1px 1px 2px black;
  transition: transform 0.2s, box-shadow 0.3s;
  font-weight: bold;
  padding: 8px 14px;
}
#startButton { background-color: lime; color: black; animation: pulseStart 1.6s infinite; }
#stopButton { background-color: red; color: white; animation: pulseStop 1.6s infinite; }
#startButton:hover { box-shadow: 0 0 10px lime; transform: scale(1.05); }
#stopButton:hover { box-shadow: 0 0 10px red; transform: scale(1.05); }
@keyframes pulseStart { 0%, 100% { box-shadow: 0 0 6px lime; } 50% { box-shadow: 0 0 16px lime; } }
@keyframes pulseStop { 0%, 100% { box-shadow: 0 0 6px red; } 50% { box-shadow: 0 0 16px red; } }
#startButton:active, #stopButton:active { transform: scale(0.95); filter: brightness(0.9); }

/* SNAPSHOT and CAPTURE OVERLAY BUTTONS */

/* --- Camera & Video SVG Icon Styles for overlay-bottomright --- */
.icon-camera, .icon-record {
  width: 24px;
  height: 24px;
  display: inline-block;
  margin-right: 8px;
  vertical-align: middle;
}

/* Camera (photo) icon styling */
.icon-camera .camera-body {
  fill: rgba(255,255,255,0.12);
  stroke: #fff;
  stroke-width: 2;
}
.icon-camera .camera-lens {
  fill: #fff;
  opacity: 0.93;
}
.icon-camera .camera-bar {
  fill: #fff;
  opacity: 0.96;
}

/* Video (record) icon styling */
.icon-record .record-outer {
  fill: #ff4040;
  stroke: #fff;
  stroke-width: 2;
}
.icon-record .record-inner {
  fill: #fff;
  opacity: 0.93;
}

/* Optional: On hover/active, highlight icons */
.overlay-bottomright:hover .icon-camera .camera-body,
.overlay-bottomright.active .icon-camera .camera-body {
  stroke: #ff3535;
}
.overlay-bottomright:hover .icon-record .record-outer,
.overlay-bottomright.active .icon-record .record-outer {
  fill: #ff3535;
  stroke: #ff3535;
}

@keyframes recordPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(255,32,32,0.88), 0 0 14px 4px rgba(255,60,60,0.7);
  }
  50% {
    box-shadow: 0 0 0 14px rgba(255,32,32,0.42), 0 0 28px 8px rgba(255,120,120,0.44);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(255,32,32,0), 0 0 14px 4px rgba(255,60,60,0.3);
  }
}

#videoCaptureBtn.recording {
  animation: recordPulse 1.1s infinite;
  background: #2b0000;
  color: white !important;
  border-color: #ff4444 !important;
  /* Optionally: Make button a little bolder for effect */
  filter: brightness(1.1);
}
#videoCaptureBtn.recording .icon-record .record-outer {
  fill: #ff3535 !important;
  stroke: #fff !important;
  /* Add glowing effect */
  filter: drop-shadow(0 0 6px #ff4444);
  transition: filter 0.2s;
}

@keyframes captureGlowHover {
  0%   { box-shadow: 0 2px 6px #0006, 0 0 0px #ff444477; }
  40%  { box-shadow: 0 2px 6px #0006, 0 0 14px 3px #ff4444bb; }
  100% { box-shadow: 0 2px 6px #0006, 0 0 0px #ff444477; }
}

#videoCaptureBtn:hover:not(.recording) {
  background: #ff444422;
  color: #ff4444;
  animation: captureGlowHover 1s linear infinite;
  border-color: #ff4444;
}

/*------------MÄ±c button--------------*/
#micBtn {
  background: #444;
  color: white;
  transition: background 0.2s, color 0.2s, box-shadow 0.2s, transform 0.1s;
  border-radius: 8px;
  padding: 7px 15px;
  box-shadow: 0 2px 6px #0006;
  display: flex;
  align-items: center;
  gap: 8px;
  /* Remove blinking caret/cursor */
  caret-color: transparent;
  /* Optional: Prevent accidental selection */
  user-select: none;
  /* Remove focus outline (custom below) */
  outline: none;
  border: none;
  cursor: pointer;
}

#micBtn.active, #micBtn.listening {
  background: #16d16e;
  color: white;
  box-shadow: 0 0 12px 3px #fff700, 0 0 24px 8px #fff70077, 0 2px 6px #0006;
  animation: micPulse 1s infinite;
}
#micBtn:active, #micBtn.pushed {
  transform: scale(0.93);
  filter: brightness(0.92);
}
#micBtn.active #micIcon,
#micBtn.listening #micIcon {
  color: #fff700 !important;
  text-shadow: 0 0 8px #fff700cc, 0 0 20px #fff70055;
}
#micBtn.active:hover, #micBtn.listening:hover {
  background: #16d16e;
  color: #fff700;
  box-shadow: 0 0 20px 8px #fff700, 0 2px 10px #16d16e44;
}
/* Pulse animation for "on" state */
@keyframes micPulse {
  0%   { box-shadow: 0 0 12px 3px #fff700, 0 0 24px 8px #fff70077, 0 2px 6px #0006; }
  50%  { box-shadow: 0 0 24px 8px #fff700aa, 0 0 36px 14px #fff70055, 0 2px 10px #16d16e44; }
  100% { box-shadow: 0 0 12px 3px #fff700, 0 0 24px 8px #fff70077, 0 2px 6px #0006; }
}

@keyframes micGlowHover {
  0%   { box-shadow: 0 2px 6px #0006, 0 0 0px #16d16e77; }
  40%  { box-shadow: 0 2px 6px #0006, 0 0 14px 3px #16d16e88; }
  100% { box-shadow: 0 2px 6px #0006, 0 0 0px #16d16e77; }
}

#micBtn:hover:not(.active):not(.listening) {
  background: #16d16e33;
  color: #fff700;
  animation: micGlowHover 0.9s linear infinite;
}

/* Transparent background for all overlay buttons by default */
.overlay-bottomright,
#photoCaptureBtn,
#videoCaptureBtn,
#drawPathBtn,
#wipePathBtn,
#mediaPlayerBtn {
  background: transparent !important;
  color: white;
  transition: background 0.2s, color 0.2s, box-shadow 0.2s, transform 0.1s;
  border-radius: 8px;
  padding: 7px 15px;
  box-shadow: 0 2px 6px #0006;
  display: flex;
  align-items: center;
  gap: 8px;
  caret-color: transparent;
  user-select: none;
  outline: none;
  border: none;
  cursor: pointer;
  font-size: 1em;
}

/* Tactile press for all overlay buttons */
.overlay-bottomright:active, 
.overlay-bottomright.pushed,
#photoCaptureBtn:active, #photoCaptureBtn.pushed,
#videoCaptureBtn:active, #videoCaptureBtn.pushed,
#drawPathBtn:active, #drawPathBtn.pushed,
#wipePathBtn:active, #wipePathBtn.pushed,
#mediaPlayerBtn:active, #mediaPlayerBtn.pushed {
  transform: scale(0.93);
  filter: brightness(0.92);
}

/* Animated hover effect for all overlay buttons (when not active/recording) */
@keyframes overlayGlowHover {
  0%   { box-shadow: 0 2px 6px #0006, 0 0 0px #16d16e77; }
  40%  { box-shadow: 0 2px 6px #0006, 0 0 14px 3px #16d16e88; }
  100% { box-shadow: 0 2px 6px #0006, 0 0 0px #16d16e77; }
}
.overlay-bottomright:hover:not(.active):not(.listening):not(.recording),
#photoCaptureBtn:hover,
#drawPathBtn:hover,
#wipePathBtn:hover,
#mediaPlayerBtn:hover {
  background: rgba(22,209,110,0.17);
  color: #fff700;
  animation: overlayGlowHover 0.9s linear infinite;
}

/* Special: Video capture hover = red glow when not recording */
@keyframes captureGlowHover {
  0%   { box-shadow: 0 2px 6px #0006, 0 0 0px #ff444477; }
  40%  { box-shadow: 0 2px 6px #0006, 0 0 14px 3px #ff4444bb; }
  100% { box-shadow: 0 2px 6px #0006, 0 0 0px #ff444477; }
}
#videoCaptureBtn:hover:not(.recording) {
  background: rgba(255,68,68,0.12);
  color: #ff4444;
  animation: captureGlowHover 1s linear infinite;
  border-color: #ff4444;
}

/* Active/recording/pulsing states (keep your existing) */
#videoCaptureBtn.recording {
  animation: recordPulse 1.1s infinite;
  background: #2b0000;
  color: white !important;
  border-color: #ff4444 !important;
  filter: brightness(1.1);
}
#videoCaptureBtn.recording .icon-record .record-outer {
  fill: #ff3535 !important;
  stroke: #fff !important;
  filter: drop-shadow(0 0 6px #ff4444);
  transition: filter 0.2s;
}

/* Mic active/listening style stays the same */
#micBtn.active, #micBtn.listening {
  background: #16d16e;
  color: white;
  box-shadow: 0 0 12px 3px #fff700, 0 0 24px 8px #fff70077, 0 2px 6px #0006;
  animation: micPulse 1s infinite;
}

/* Mic hover (when not active) uses transparent+glow like the rest */
#micBtn:hover:not(.active):not(.listening) {
  background: rgba(22,209,110,0.17);
  color: #fff700;
  animation: overlayGlowHover 0.9s linear infinite;
}

/* Focus style */
.overlay-bottomright:focus,
#photoCaptureBtn:focus,
#videoCaptureBtn:focus,
#drawPathBtn:focus,
#wipePathBtn:focus,
#mediaPlayerBtn:focus {
  outline: none;
  box-shadow: 0 0 0 3px #38ffa177, 0 2px 6px #0006;
}

.cameraStyle {
  background-color: #1976d2 !important; /* blue */
  color: white !important;
}
#cameraToggleBtn.active {
  background-color: #42a5f5 !important;
  color: #fff;
  border: none;
}
